import{r as a,j as n,a as F,b as M}from"./react-vendor-D5lQAN7H.js";import{g as D}from"./index-BzEnwQyO.js";import"./vendor-7OC5HNn7.js";const T=[{id:"anna-smirnova",author:"Анна Смирнова",date:"24 апреля 2025",rating:5,avatar:null,text:"Потрясающее место! Мастера очень внимательны к деталям. Мой пудель, который обычно боится стрижки, вел себя абсолютно спокойно. Результат превзошел ожидания."},{id:"kira-shubskaya",author:"Кира Шубская",date:"22 февраля 2025",rating:5,avatar:D("avatar.png"),text:"Первый груминг прошел на удивление спокойно. Мастер нашла подход к моей собаке мгновенно. Шерсть блестит, собака счастлива!"},{id:"anastasia-r",author:"Анастасия Р.",date:"18 января 2025",rating:5,avatar:null,text:"Отличный сервис, уютная атмосфера. Очень чисто и видно, что здесь любят животных. Обязательно вернемся."},{id:"heppike",author:"HeppiKe",date:"11 сентября 2024",rating:5,avatar:null,text:"После экспресс-линьки дома стало гораздо чище. Кот перенес процедуру спокойно благодаря профессионализму мастеров."},{id:"elena-v",author:"Елена В.",date:"7 марта 2025",rating:4,avatar:null,text:"Вежливый администратор и аккуратная работа мастера. Забрала собаку вовремя, шерсть мягкая и без колтунов. Поставила бы 5, если бы было чуть больше мест для парковки."},{id:"dmitriy-k",author:"Дмитрий К.",date:"27 декабря 2024",rating:5,avatar:null,text:"Привел корги на гигиенический комплекс. Все сделали быстро и качественно, дали рекомендации по домашнему уходу. Отличный уровень сервиса."},{id:"marina-s",author:"Марина С.",date:"3 ноября 2024",rating:4,avatar:null,text:"Хороший салон, приятный интерьер и внимательные мастера. Кошка после процедуры чувствовала себя спокойно. В целом очень довольна."}],R=t=>t>=1024?3:t>=640?2:1,z=t=>{const[s,i]=a.useState(0),[p,f]=a.useState(!1),[o,x]=a.useState(()=>typeof window>"u"?3:R(window.innerWidth)),[_,v]=a.useState(()=>typeof window>"u"?3:R(window.innerWidth)),[I,k]=a.useState(!0),r=a.useRef(null),c=t>o,d=o,j=a.useMemo(()=>o+Math.max(0,t-1),[o,t]),b=a.useCallback(()=>{r.current!==null&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{r.current=requestAnimationFrame(()=>{k(!0)})})},[]),g=a.useCallback(e=>{k(!1),v(e),b()},[b]);a.useEffect(()=>{const e=()=>x(R(window.innerWidth));return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),a.useEffect(()=>()=>{r.current!==null&&cancelAnimationFrame(r.current)},[]),a.useEffect(()=>{if(t<=0){i(0),v(0);return}i(e=>{const u=(e%t+t)%t;return g(d+u),u})},[g,d,o,t]);const y=a.useCallback(()=>{c&&(i(e=>(e+1)%t),v(e=>e+1))},[c,t]),P=a.useCallback(()=>{c&&(i(e=>(e-1+t)%t),v(e=>e-1))},[c,t]),E=a.useCallback(()=>{if(!(!c||t<=0)){if(_>j){g(d);return}_<d&&g(j)}},[c,g,j,d,t,_]);a.useEffect(()=>{if(p||!c)return;const e=setInterval(()=>{y()},4500);return()=>clearInterval(e)},[c,p,y]);const w=a.useCallback(()=>f(!0),[]),C=a.useCallback(()=>f(!1),[]);return{canSlide:c,index:s,isTransitionEnabled:I,slidesPerView:o,trackIndex:_,next:y,prev:P,handleTrackTransitionEnd:E,pause:w,resume:C}},A="_card_hc3xb_1",O="_stars_hc3xb_11",L="_starFilled_hc3xb_17",W="_starEmpty_hc3xb_22",X="_text_hc3xb_27",U="_author_hc3xb_36",V="_avatar_hc3xb_57",B="_avatarFallback_hc3xb_58",m={card:A,stars:O,starFilled:L,starEmpty:W,text:X,author:U,avatar:V,avatarFallback:B},H=t=>{const s=t.split(" ").filter(Boolean);return s.length===0?"PC":s.length===1?s[0].slice(0,2).toUpperCase():`${s[0][0]??""}${s[1][0]??""}`.toUpperCase()},S=({review:t})=>{const s=Math.max(0,Math.min(5,t.rating)),i=5-s;return n.jsxs("article",{className:m.card,children:[n.jsxs("div",{className:m.stars,"aria-label":`Оценка ${s} из 5`,children:[Array.from({length:s}).map((p,f)=>n.jsx("span",{className:m.starFilled,children:"★"},`filled-${t.id}-${f}`)),Array.from({length:i}).map((p,f)=>n.jsx("span",{className:m.starEmpty,children:"★"},`empty-${t.id}-${f}`))]}),n.jsxs("p",{className:m.text,children:['"',t.text,'"']}),n.jsxs("footer",{className:m.author,children:[t.avatar?n.jsx("img",{src:t.avatar,alt:t.author,className:m.avatar,loading:"lazy",decoding:"async"}):n.jsx("div",{className:m.avatarFallback,"aria-hidden":"true",children:H(t.author)}),n.jsxs("div",{children:[n.jsx("strong",{children:t.author}),n.jsx("span",{children:t.date})]})]})]})},q="_section_10t3f_1",K="_container_10t3f_6",G="_head_10t3f_11",J="_controls_10t3f_33",Q="_viewport_10t3f_58",Y="_track_10t3f_65",Z="_dragging_10t3f_72",ee="_noTransition_10t3f_77",te="_slide_10t3f_81",ne="_srOnly_10t3f_87",h={section:q,container:K,head:G,controls:J,viewport:Q,track:Y,dragging:Z,noTransition:ee,slide:te,srOnly:ne},ae=58,ce=()=>{const{index:t,trackIndex:s,slidesPerView:i,next:p,prev:f,pause:o,resume:x,canSlide:_,isTransitionEnabled:v,handleTrackTransitionEnd:I}=z(T.length),k=a.useRef(null),r=a.useRef({active:!1,startX:0,pointerId:null}),[c,d]=a.useState(0),[j,b]=a.useState(!1),g=a.useMemo(()=>{if(T.length===0)return[];const e=T.slice(-i).map((l,N)=>({review:l,key:`before-${l.id}-${N}`})),u=T.map(l=>({review:l,key:`main-${l.id}`})),$=T.slice(0,i).map((l,N)=>({review:l,key:`after-${l.id}-${N}`}));return[...e,...u,...$]},[i]),y=e=>{_&&(e.pointerType==="mouse"&&e.button!==0||(r.current={active:!0,startX:e.clientX,pointerId:e.pointerId},b(!0),d(0),o(),e.currentTarget.setPointerCapture?.(e.pointerId)))},P=e=>{if(!r.current.active)return;const u=e.clientX-r.current.startX;d(u)},E=e=>{if(!r.current.active)return;const u=k.current?.clientWidth??0,$=Math.max(ae,u*.08),l=c;_&&Math.abs(l)>$&&(l<0?p():f()),r.current.active=!1,b(!1),d(0),x(),r.current.pointerId!==null&&e.currentTarget.releasePointerCapture?.(r.current.pointerId)},w=e=>{r.current.active=!1,b(!1),d(0),x(),e.currentTarget.releasePointerCapture?.(e.pointerId)},C=-(s*100/i);return n.jsx("section",{className:h.section,id:"reviews",onMouseEnter:o,onMouseLeave:x,children:n.jsxs("div",{className:h.container,children:[n.jsxs("header",{className:h.head,children:[n.jsxs("div",{children:[n.jsx("p",{children:"ОТЗЫВЫ"}),n.jsx("h2",{children:"Впечатления гостей"})]}),n.jsxs("div",{className:h.controls,children:[n.jsx("button",{type:"button",onClick:f,onFocus:o,onBlur:x,"aria-label":"Предыдущий отзыв",children:n.jsx(F,{size:17})}),n.jsx("button",{type:"button",onClick:p,onFocus:o,onBlur:x,"aria-label":"Следующий отзыв",children:n.jsx(M,{size:17})})]})]}),n.jsxs("p",{className:h.srOnly,"aria-live":"polite",children:["Показ отзывов: слайд ",t+1]}),n.jsx("div",{ref:k,className:h.viewport,onPointerDown:y,onPointerMove:P,onPointerUp:E,onPointerLeave:E,onPointerCancel:w,children:n.jsx("div",{className:`${h.track} ${j?h.dragging:""} ${v?"":h.noTransition}`.trim(),style:{"--slides-per-view":i,transform:`translateX(calc(${C}% + ${c}px))`},onTransitionEnd:I,children:g.map(({review:e,key:u})=>n.jsx("div",{className:h.slide,children:n.jsx(S,{review:e})},u))})})]})})};export{ce as ReviewsSection};
